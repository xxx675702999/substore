#
# mihomo (Clash.Meta) é…ç½®æ–‡ä»¶æ¨¡æ¿
# é€‚ç”¨äº Sub-Store - çº¯è§„åˆ™ä¸ç­–ç•¥ç»„å®šä¹‰
# èŠ‚ç‚¹ç”± Sub-Store åŠ¨æ€æä¾›å’Œç­›é€‰
#

# åŸºç¡€é…ç½®
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
global-ua: "clash-verge/v2.2.0"

# DNS é…ç½®
dns:
  enable: true
  listen: '0.0.0.0:1053'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '+.lan'
    - '+.local'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
  default-nameserver: [223.5.5.5, 1.2.4.8]
  nameserver:
    - 'https://cloudflare-dns.com/dns-query'
    - 'https://dns.google/dns-query'
  proxy-server-nameserver:
    - 'https://223.5.5.5/dns-query'
  nameserver-policy:
    'geosite:cn': ['https://223.5.5.5/dns-query']

# ä»£ç†ç»„ (Proxy Groups)
# 'PROXY' æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ŒSub-Store ä¼šå°†æ‚¨ç»„åˆçš„æ‰€æœ‰èŠ‚ç‚¹æ”¾å…¥æ­¤ç»„ã€‚
proxy-groups:
  - name: 'ğŸ”° æ¨¡å¼é€‰æ‹©'
    type: select
    proxies:
      - 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©'
      - 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹'
      - 'ğŸ”— å…¨å±€ç›´è¿'
      - 'DIRECT'

  # ============== æ ¸å¿ƒåˆ†ç»„é€»è¾‘ ==============

  # 1. è½åœ°èŠ‚ç‚¹ç»„ (ç¬¬äºŒè·³)
  #    - ä½¿ç”¨ 'filter' ä»æ‰€æœ‰èŠ‚ç‚¹(PROXY)ä¸­ç­›é€‰å‡ºæ‚¨æ ‡è®°ä¸ºâ€œè½åœ°â€æˆ–â€œå®¶å®½â€çš„èŠ‚ç‚¹ã€‚
  #    - è¿™äº›èŠ‚ç‚¹éœ€è¦ç”± Sub-Store è„šæœ¬æ·»åŠ  `dialer-proxy` å±æ€§æ¥å®ç°é“¾å¼ä»£ç†ã€‚
  - name: 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹'
    type: select
    use: [PROXY]
    filter: '(?i)è½åœ°|å®¶å®½'

  # 2. ä¸­è½¬/å‡ºå£èŠ‚ç‚¹ç»„ (ç¬¬ä¸€è·³)
  #    - ä½¿ç”¨ 'exclude-filter' æ’é™¤äº†æ‰€æœ‰è¢«æ ‡è®°ä¸ºè½åœ°èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œé˜²æ­¢ä»£ç†å¾ªç¯ã€‚
  - name: 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©'
    type: select
    use: [PROXY]
    exclude-filter: '(?i)è½åœ°|å®¶å®½'
    proxies:
      - 'â™»ï¸ å»¶è¿Ÿé€‰ä¼˜'
      - 'ğŸš‘ æ•…éšœè½¬ç§»'
      - 'âš–ï¸ è´Ÿè½½å‡è¡¡(æ•£åˆ—)'
      - 'â˜ï¸ è´Ÿè½½å‡è¡¡(è½®è¯¢)'

  - name: 'â™»ï¸ å»¶è¿Ÿé€‰ä¼˜'
    type: url-test
    url: 'https://www.google.com/generate_204'
    interval: 3600
    lazy: true
    use: [PROXY]
    exclude-filter: '(?i)è½åœ°|å®¶å®½'

  - name: 'ğŸš‘ æ•…éšœè½¬ç§»'
    type: fallback
    url: 'https://www.google.com/generate_204'
    interval: 3600
    lazy: true
    use: [PROXY]
    exclude-filter: '(?i)è½åœ°|å®¶å®½'

  - name: 'âš–ï¸ è´Ÿè½½å‡è¡¡(æ•£åˆ—)'
    type: load-balance
    strategy: consistent-hashing
    url: 'https://www.google.com/generate_204'
    interval: 3600
    lazy: true
    use: [PROXY]
    exclude-filter: '(?i)è½åœ°|å®¶å®½'

  - name: 'â˜ï¸ è´Ÿè½½å‡è¡¡(è½®è¯¢)'
    type: load-balance
    strategy: round-robin
    url: 'https://www.google.com/generate_204'
    interval: 3600
    lazy: true
    use: [PROXY]
    exclude-filter: '(?i)è½åœ°|å®¶å®½'

  # --- å…¶ä»–åˆ†æµç­–ç•¥ç»„ (å‡å·²åŒ…å«'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹'é€‰é¡¹) ---
  - name: 'ğŸŸ æ¼ç½‘ä¹‹é±¼'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ’¸ ChatGPT-Gemini-XAI-Perplexity'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ’µ Claude'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸª™ Bybit'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ…¿ï¸ PikPak'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ“² ç”µæŠ¥æ¶ˆæ¯'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ“¢ è°·æ­ŒæœåŠ¡'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ è‹¹æœæœåŠ¡'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'â“‚ï¸ å¾®è½¯æœåŠ¡'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']
  - name: 'ğŸ¥° å¹¿å‘Šè¿‡æ»¤'
    type: select
    proxies: [REJECT, DIRECT]
  - name: 'ğŸ”— å…¨å±€ç›´è¿'
    type: select
    proxies: [DIRECT, 'ğŸ”° æ¨¡å¼é€‰æ‹©']
  - name: 'ğŸ¬ è‡ªå®šä¹‰ç›´è¿'
    type: select
    proxies: ['ğŸ”— å…¨å±€ç›´è¿', 'ğŸ”° æ¨¡å¼é€‰æ‹©']
  - name: 'ğŸ³ è‡ªå®šä¹‰ä»£ç†'
    type: select
    proxies: ['ğŸ”° æ¨¡å¼é€‰æ‹©', 'âš™ï¸ èŠ‚ç‚¹é€‰æ‹©', 'ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹', 'ğŸ”— å…¨å±€ç›´è¿']

# è§„åˆ™é›† (Rule Providers) - (ä¿æŒä¸å˜)
rule-providers:
  reject: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt", path: ./ruleset/reject.yaml, interval: 86400 }
  icloud: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt", path: ./ruleset/icloud.yaml, interval: 86400 }
  apple: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt", path: ./ruleset/apple.yaml, interval: 86400 }
  google: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt", path: ./ruleset/google.yaml, interval: 86400 }
  proxy: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt", path: ./ruleset/proxy.yaml, interval: 86400 }
  direct: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt", path: ./ruleset/direct.yaml, interval: 86400 }
  private: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt", path: ./ruleset/private.yaml, interval: 86400 }
  gfw: { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt", path: ./ruleset/gfw.yaml, interval: 86400 }
  'tld-not-cn': { type: http, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt", path: ./ruleset/tld-not-cn.yaml, interval: 86400 }
  telegramcidr: { type: http, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt", path: ./ruleset/telegramcidr.yaml, interval: 86400 }
  cncidr: { type: http, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt", path: ./ruleset/cncidr.yaml, interval: 86400 }
  lancidr: { type: http, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt", path: ./ruleset/lancidr.yaml, interval: 86400 }
  applications: { type: http, behavior: classical, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt", path: ./ruleset/applications.yaml, interval: 86400 }
  openai: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/openai.yaml", path: ./ruleset/openai.yaml, interval: 86400 }
  bybit: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/bybit.yaml", path: ./ruleset/bybit.yaml, interval: 86400 }
  pikpak: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/pikpak.yaml", path: ./ruleset/pikpak.yaml, interval: 86400 }
  anthropic: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/anthropic.yaml", path: ./ruleset/anthropic.yaml, interval: 86400 }
  'google-gemini': { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/google-gemini.yaml", path: ./ruleset/google-gemini.yaml, interval: 86400 }
  xai: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/xai.yaml", path: ./ruleset/xai.yaml, interval: 86400 }
  perplexity: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/perplexity.yaml", path: ./ruleset/perplexity.yaml, interval: 86400 }
  microsoft: { type: http, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/microsoft.yaml", path: ./ruleset/microsoft.yaml, interval: 86400 }

# è§„åˆ™ (Rules) - (ä¿æŒä¸å˜)
rules:
  - 'PROCESS-NAME,steam.exe,ğŸ¬ è‡ªå®šä¹‰ç›´è¿'
  - 'DOMAIN-SUFFIX,immersivetranslate.com,ğŸ³ è‡ªå®šä¹‰ä»£ç†'
  - 'DOMAIN-SUFFIX,googleapis.cn,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'DOMAIN-SUFFIX,gstatic.com,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'DOMAIN-SUFFIX,github.io,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'DOMAIN,v2rayse.com,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'RULE-SET,openai,ğŸ’¸ ChatGPT-Gemini-XAI-Perplexity'
  - 'RULE-SET,pikpak,ğŸ…¿ï¸ PikPak'
  - 'RULE-SET,bybit,ğŸª™ Bybit'
  - 'RULE-SET,anthropic,ğŸ’µ Claude'
  - 'RULE-SET,google-gemini,ğŸ’¸ ChatGPT-Gemini-XAI-Perplexity'
  - 'RULE-SET,xai,ğŸ’¸ ChatGPT-Gemini-XAI-Perplexity'
  - 'RULE-SET,perplexity,ğŸ’¸ ChatGPT-Gemini-XAI-Perplexity'
  - 'RULE-SET,applications,ğŸ”— å…¨å±€ç›´è¿'
  - 'RULE-SET,private,ğŸ”— å…¨å±€ç›´è¿'
  - 'RULE-SET,reject,ğŸ¥° å¹¿å‘Šè¿‡æ»¤'
  - 'RULE-SET,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡'
  - 'RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡'
  - 'RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡'
  - 'RULE-SET,google,ğŸ“¢ è°·æ­ŒæœåŠ¡'
  - 'RULE-SET,proxy,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'RULE-SET,gfw,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'RULE-SET,tld-not-cn,ğŸ”° æ¨¡å¼é€‰æ‹©'
  - 'RULE-SET,direct,ğŸ”— å…¨å±€ç›´è¿'
  - 'RULE-SET,lancidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve'
  - 'RULE-SET,cncidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve'
  - 'RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve'
  - 'GEOIP,LAN,ğŸ”— å…¨å±€ç›´è¿,no-resolve'
  - 'GEOIP,CN,ğŸ”— å…¨å±€ç›´è¿,no-resolve'
  - 'MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼'
